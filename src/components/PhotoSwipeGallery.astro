---
interface Photo {
  src: string;
  width: number;
  height: number;
  alt: string;
}

interface Props {
  photos: Photo[];
}

const { photos } = Astro.props;
---

<div class="gallery" id="gallery">
  {photos.map((photo, index) => (
    <a 
      href={photo.src}
      data-pswp-width={photo.width}
      data-pswp-height={photo.height}
      target="_blank"
      rel="noreferrer"
    >
      <img src={photo.src} alt={photo.alt} />
    </a>
  ))}
</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@5.4.4/dist/photoswipe.css">

<script>
  import PhotoSwipeLightbox from 'photoswipe/lightbox';
  import 'photoswipe/style.css';

  const lightbox = new PhotoSwipeLightbox({
    gallery: '#gallery',
    children: 'a',
    pswpModule: () => import('photoswipe')
  });
  
  lightbox.init();
</script>

<style>
  .gallery {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 1rem;
    margin: 2rem 0;
  }
  
  .gallery a {
    display: block;
    overflow: hidden;
    border-radius: 8px;
  }
  
  .gallery img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
  }
  
  .gallery a:hover img {
    transform: scale(1.05);
  }
</style>
